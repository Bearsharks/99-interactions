{"version":3,"sources":["tictactoe.module.css","index.module.css","Mosaic.module.css","Home.module.css","calLiWorker.js","greyScaleMaker.js","lib/MyCanvas.js","lib/Vector2D.js","PaperDribble.js","tictactoe.js","Home.js","Mosaic.js","index.js"],"names":["module","exports","code","onmessage","e","imgData","data","pixels","lightness","i","length","parseInt","cnt","postMessage","toString","substring","indexOf","lastIndexOf","blob","Blob","type","worker_script","URL","createObjectURL","isFull","nOfSameLightnessImgs","Uint8ClampedArray","li","res","d","copy","ImageData","width","height","dataCopy","k","set","push","MyCanvas","options","default_args","index","this","vars","consts","simulate","render","init","_delete","delete","simulResult","_prevSResult","lastReq","canAnimRun","canRender","_canvas","_init","renderFrame","canvas","context","getContext","timestamp","requestAnimationFrame","bind","clearRect","_simulate","cancelAnimationFrame","param","console","assert","beginPath","moveTo","forEach","element","lineTo","closePath","style","fillStyle","fill","rgb","v","Math","max","c","min","h","round","hsv","f","n","array","Vector2D","_param1","_param2","x","y","undefined","magnitude","sqrt","scala","_tgt","tgt","multiply","dotProduct","result","acos","nomalize","PI","src","dst","coeff","ret","interpolation","Paper","props","canvasRef","useRef","curPos","mycanvas","totalFlipTime","initialV","size","initialPos","flipState","done","fliping","unfliping","unflipedSquare","flipedSquare","doflip","progress","isUnflipPended","unflip","calCurV","_curPos","moveV","pos","projecV","projection","orthoV","subtract","moveVForP2","add","coeff_friction","prevp2","curp2","isClicked","gra","createLinearGradient","addColorStop","simulRes","slice","poligon","time","srcPoligon","dstPoligon","srcColor","dstColor","tgtcolor","map","el","toUpperCase","padStart","join","save","translate","rotate","getRadian","drawPolygon","restore","useEffect","animStart","current","onMouseMove","clientX","offsetLeft","clientY","offsetTop","onMouseDown","onMouseUp","onMouseEnter","onMouseLeave","ref","Square","className","styles","square","onClick","value","Board","squares","boardrow","renderSquare","React","Component","calculateWinner","lines","a","b","Game","state","history","Array","stepNumber","xIsNext","setState","concat","step","status","winner","moves","move","desc","jumpTo","game","gameboard","handleClick","gameinfo","Card","card","Home","fetch","method","then","json","log","container","MosaicSize","canvasSize","MosaicInfo","bannedList","Set","imageIdx","Mosaic","originCanvasRef","tmpCanvasRef","bgImgRef","bgImg","myc","setPos","dx","dy","zoom","posX","posY","ratioX","ratioY","prevSize","originSize","zoomScale","maxZoomScale","viewportSize","preva","prevb","cura","curb","getClampVal","isInit","canMove","ratioW","ratioH","radioOfPic","originCanvas","renderedPixel","picPos","zeroX","zeroY","viewportSizeForPic","drawImage","globalAlpha","renderLightness","pos_lightness","curImage","mosaicInfo","cur","imgs","imgs_lightness","candis","imgidx","has","rd","floor","random","j","putImageData","imgInfo","base","numOfColPixel","numOfRowPixel","renderLightnessCnt","strokeStyle","w","renderedW","renderedH","tmpctx","imageData","getImageData","curPixel","fillRect","dispNone","onLoad","renderPicture","onWheel","pageX","pageY","deltaY","movementX","movementY","Main","to","activeClassName","linkActive","path","App","component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.a367c137.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"boardrow\":\"tictactoe_boardrow__14O7L\",\"status\":\"tictactoe_status__1SrtX\",\"square\":\"tictactoe_square__1UnxA\",\"kbd-navigation\":\"tictactoe_kbd-navigation__2CL-S\",\"game\":\"tictactoe_game__20N3M\",\"gameinfo\":\"tictactoe_gameinfo__ZYz2q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"src_container__Xu5Sk\",\"linkActive\":\"src_linkActive__2Jb0z\",\"test\":\"src_test__g6-Wc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"width100\":\"Mosaic_width100__2jt-x\",\"widthS\":\"Mosaic_widthS__3p1_J\",\"dispNone\":\"Mosaic_dispNone__3qLUa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Home_card__1Aten\",\"container\":\"Home_container__2zZpm\"};","const workercode = () => {\r\n    onmessage = function(e) {\r\n        let imgData = e.data;\r\n        let pixels = imgData.data;\r\n        let lightness = 0;\r\n        for (var i = 0; i < pixels.length; i += 4) {\r\n            lightness += parseInt((3*pixels[i] + 4*pixels[i + 1] + pixels[i + 2]) >>> 3);\r\n        }\r\n        let cnt = imgData.data.length/4;\r\n        lightness = parseInt(lightness / cnt);\r\n        postMessage([lightness, imgData]);\r\n    }\r\n};\r\n\r\nlet code = workercode.toString();\r\ncode = code.substring(code.indexOf(\"{\")+1, code.lastIndexOf(\"}\"));\r\n\r\nconst blob = new Blob([code], {type: \"application/javascript\"});\r\nconst worker_script = URL.createObjectURL(blob);\r\n\r\nmodule.exports = worker_script;","const workercode = () => {\r\n    onmessage = function(e) {\r\n        let isFull = e.data.isFull;\r\n        let lightness = e.data.lightness;\r\n        let imgData = e.data.imgData;\r\n        let nOfSameLightnessImgs = e.data.nOfSameLightnessImgs;\r\n        let pixels = new Uint8ClampedArray(imgData.data);\r\n        for (let i = 0; i < pixels.length; i += 4) {\r\n            let li = parseInt((3*pixels[i] + 4*pixels[i + 1] + pixels[i + 2]) >>> 3);\r\n            pixels[i] = li;\r\n            pixels[i + 1] = li;\r\n            pixels[i + 2] = li;\r\n        }\r\n        let res = [];\r\n        for(let d = -20; d <= 10 ;d++){\r\n            if(lightness + d >= 10 && lightness + d <= 235 \r\n                && isFull[lightness + d] <= nOfSameLightnessImgs) {\r\n                let copy = new ImageData(imgData.width,imgData.height);\r\n                let dataCopy = new Uint8ClampedArray(pixels);\r\n                if(d < 0){\r\n                    let k = (lightness + d) / lightness;\r\n                    for (let i = 0; i < dataCopy.length; i += 4) {\r\n                        dataCopy[i] *= k;\r\n                        dataCopy[i + 1] *= k;\r\n                        dataCopy[i + 2] *= k;\r\n                    }\r\n                }else if (d > 0){\r\n                    for (let i = 0; i < dataCopy.length; i += 4) {\r\n                        dataCopy[i] += d;\r\n                        dataCopy[i + 1] += d;\r\n                        dataCopy[i + 2] += d;\r\n                    }\r\n                }\r\n                copy.data.set(dataCopy);\r\n                res.push([lightness+d,copy]);\r\n            }\r\n        }\r\n        postMessage(res);\r\n    }\r\n};\r\n\r\nlet code = workercode.toString();\r\ncode = code.substring(code.indexOf(\"{\")+1, code.lastIndexOf(\"}\"));\r\n\r\nconst blob = new Blob([code], {type: \"application/javascript\"});\r\nconst worker_script = URL.createObjectURL(blob);\r\n\r\nmodule.exports = worker_script;","export class MyCanvas{\r\n  constructor(options){    \r\n    var default_args = {\r\n      'vars'       :   null,\r\n      'consts'     :   null,\r\n      'simulate'   :   ()=>{},\r\n      'render'     :   ()=>{},\r\n      'init'       :   ()=>{},\r\n      'delete'     :   ()=>{},\r\n    }\r\n    for (var index in default_args) {\r\n        if (typeof options[index] == \"undefined\") options[index] = default_args[index];\r\n    }\r\n    this.vars = options.vars;\r\n    this.consts = options.consts;\r\n    this.simulate = options.simulate;\r\n    this.render = options.render;\r\n    this.init = options.init;\r\n    this._delete = options.delete;\r\n    this.simulResult = null;\r\n    this._prevSResult = null;\r\n    this.lastReq = null;\r\n    this.canAnimRun = true;\r\n    this.canRender = true;\r\n  }\r\n  \r\n  animStart(_canvas){\r\n    this._init(_canvas);\r\n    this.renderFrame();\r\n  }\r\n  _init(_canvas){\r\n    this.canvas = _canvas;\r\n    this.context = _canvas.getContext('2d');\r\n    this.init();\r\n  }\r\n  renderFrame(timestamp){   \r\n    this.lastReq = requestAnimationFrame(this.renderFrame.bind(this));\r\n    if(!this.canAnimRun) return;    \r\n    this.context.clearRect(0, 0, this.canvas.width,  this.canvas.height);\r\n    this._simulate(timestamp);\r\n    if(!this.canRender) return;\r\n    this.render(timestamp);\r\n    \r\n  }\r\n  renderPicture(_canvas){\r\n    this._init(_canvas);\r\n    if(!this.canRender) return;\r\n    this.context.clearRect(0, 0, this.canvas.width,  this.canvas.height);\r\n    this.render();\r\n  }\r\n  _simulate(timestamp){\r\n    this.simulate(timestamp);\r\n  }\r\n  delete(){\r\n    cancelAnimationFrame(this.lastReq);\r\n    this._delete();\r\n  }\r\n  drawPolygon(param){\r\n    console.assert(param && param.length > 2, \"다각형을 구성하는 점이 너무 작습니다.\");\r\n    this.context.beginPath();\r\n    this.context.moveTo(param[0][0], param[0][1]);\r\n    param.forEach(element => {\r\n      this.context.lineTo(element[0],element[1]);\r\n    });\r\n    this.context.closePath();\r\n  }\r\n  fill(style){\r\n    this.context.fillStyle = style;\r\n    this.context.fill();\r\n  }\r\n  static rgb2hsv(rgb) {\r\n    let v = Math.max(rgb[0],rgb[1],rgb[2]), c = v-Math.min(rgb[0],rgb[1],rgb[2]);\r\n    let h = c && ((v===rgb[0]) ? (rgb[1]-rgb[2])/c : ((v===rgb[1]) ? 2+(rgb[2]-rgb[0])/c : 4+(rgb[0]-rgb[1])/c)); \r\n    return [Math.round(60*(h<0?h+6:h)), v&&c/v, v];\r\n  }\r\n  static hsv2rgb(hsv){                            \r\n    let f = (n,k=(n+hsv[0]/60)%6) => hsv[2] - hsv[2]*hsv[1]*Math.max( Math.min(k,4-k,1), 0);     \r\n    return [f(5),f(3),f(1)];       \r\n  }\r\n  static getGreyScale(imgData){\r\n    let array = imgData;\r\n    if(array.data) array = array.data;\r\n    return parseInt((3*array[0] + 4*array[1] + array[2]) >>> 3);\r\n  }\r\n  static lightnessMul(imgData,k){\r\n    let res = new ImageData(imgData.width,imgData.height);\r\n    var pixels = new Uint8ClampedArray(imgData.data);\r\n    for (var i = 0; i < pixels.length; i += 4) {\r\n      pixels[i] *= k;\r\n      pixels[i + 1] *= k;\r\n      pixels[i + 2] *= k;\r\n    }\r\n    res.data.set(pixels);\r\n    return res;\r\n  }\r\n  static lightnessAdd(imgData,k){\r\n    let res = new ImageData(imgData.width,imgData.height);\r\n    var pixels = new Uint8ClampedArray(imgData.data);\r\n    for (var i = 0; i < pixels.length; i += 4) {\r\n      pixels[i] += k;\r\n      pixels[i + 1] += k;\r\n      pixels[i + 2] += k;\r\n    }\r\n    res.data.set(pixels);\r\n    return res;\r\n  }\r\n  static img2greyScale(imgData){\r\n    let pixels = imgData.data;\r\n    for (var i = 0; i < pixels.length; i += 4) {\r\n        let lightness = parseInt((3*pixels[i] + 4*pixels[i + 1] + pixels[i + 2]) >>> 3);\r\n        pixels[i] = lightness;\r\n        pixels[i + 1] = lightness;\r\n        pixels[i + 2] = lightness;\r\n    }\r\n    return imgData;\r\n  }\r\n}  ","export class Vector2D{\r\n  constructor(_param1, _param2) {\r\n    if(typeof _param1 === \"object\" && typeof _param2 === \"object\"){\r\n      this.x = _param2[0] - _param1[0];\r\n      this.y = _param2[1] - _param1[1];\r\n    }else if(typeof _param1 === \"number\" && typeof _param2 === \"number\"){\r\n      this.x = _param1;\r\n      this.y = _param2;  \r\n    } else if(_param1.x !== undefined && _param1.y !== undefined ){\r\n      this.x = _param1.x;\r\n      this.y = _param1.y;\r\n    }else{\r\n      this.x = 0;\r\n      this.y = 0;\r\n    }    \r\n  }\r\n  static interpolation(src, dst, coeff){\r\n    if(!src.length && !dst.length) return (1-coeff)*src + coeff*dst;\r\n    if(src.length !== dst.length) return;\r\n    let ret = [];\r\n    for(let i = 0; i < src.length;i++){\r\n      ret[i] = Vector2D.interpolation(src[i], dst[i], coeff);\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  dotProduct(v) {\r\n    return this.x * v.x + this.y * v.y;\r\n  }\r\n  \r\n  nomalize() {\r\n    let magnitude = Math.sqrt(this.x * this.x + this.y * this.y);    \r\n    return new Vector2D(this.x/magnitude, this.y/magnitude);\r\n  }\r\n  \r\n  multiply(scala) {\r\n    this.x *= scala;\r\n    this.y *= scala;\r\n    return this;\r\n  }\r\n  add(v){\r\n    this.x += v.x;\r\n    this.y += v.y;\r\n    return this;\r\n  }\r\n  subtract(v){\r\n    this.x -= v.x;\r\n    this.y -= v.y;\r\n    return this;\r\n  }\r\n  projection(_tgt){\r\n    let tgt = new Vector2D(_tgt);\r\n    return tgt.multiply(this.dotProduct(tgt) / tgt.dotProduct(tgt));\r\n  }\r\n\r\n  getRadian(){\r\n    let result = Math.acos(this.nomalize().x);\r\n    if(this.y<0) result = 2*Math.PI - result;\r\n    return result;\r\n  }\r\n}\r\n","import React, { useEffect,useRef } from 'react';\r\nimport { MyCanvas } from './lib/MyCanvas';\r\nimport { Vector2D } from \"./lib/Vector2D\"\r\n\r\nfunction Paper(props) { \r\n  let canvasRef = useRef(null);  \r\n  let curPos = [-100,-100];\r\n\r\n  let mycanvas = new MyCanvas({\r\n    consts :{\r\n      totalFlipTime : 50, \r\n      initialV : new Vector2D(props.size,0),\r\n      size : props.size,\r\n      initialPos : [-100,-100],\r\n      flipState :{\r\n        done : 0,\r\n        fliping : 1,\r\n        unfliping : 2,\r\n      },\r\n      unflipedSquare :[\r\n          [-0.4*props.size,-props.size/2 - props.size/10],\r\n          [props.size,-props.size/2],\r\n          [props.size,props.size/2],\r\n          [-0.4*props.size,props.size/2 + props.size/10]            \r\n        ],\r\n      flipedSquare :[\r\n            [-props.size/2,-props.size/2],\r\n            [props.size,-props.size/2],\r\n            [props.size,props.size/2],\r\n            [-props.size/2,props.size/2]            \r\n        ],\r\n      doflip : ()=>{\r\n        if(mycanvas.vars.flipState !== mycanvas.consts.flipState.done) return;\r\n        mycanvas.vars.flipState = mycanvas.consts.flipState.fliping;\r\n        \r\n        if(mycanvas.simulResult && mycanvas.simulResult.progress) {\r\n          mycanvas.simulResult.progress = 0; \r\n        }\r\n        mycanvas.vars.isUnflipPended = false;\r\n      },\r\n      unflip : ()=>{\r\n        if(mycanvas.vars.flipState !== mycanvas.consts.flipState.done) return;\r\n        mycanvas.vars.flipState = mycanvas.consts.flipState.unfliping;\r\n        mycanvas.simulResult.progress = 0;\r\n\r\n        mycanvas.vars.isUnflipPended = false;\r\n      },\r\n      calCurV : (_curPos)=>{\r\n        let moveV = new Vector2D(mycanvas.simulResult.pos,_curPos);\r\n        //벡터 분해\r\n        let projecV = moveV.projection(mycanvas.simulResult.v);//x\r\n        let orthoV = new Vector2D(moveV).subtract(projecV);//y    \r\n        let moveVForP2 = projecV.add(orthoV.multiply(props.coeff_friction));  \r\n        //p2값 계산\r\n        let prevp2 = mycanvas.simulResult.v.nomalize().multiply(mycanvas.consts.size);\r\n        prevp2.x += mycanvas.simulResult.pos[0];\r\n        prevp2.y += mycanvas.simulResult.pos[1];\r\n        //p2 이동 \r\n        prevp2.add(moveVForP2);             \r\n        let curp2 = [prevp2.x,prevp2.y];\r\n        return new Vector2D(_curPos, curp2);\r\n      }\r\n    },\r\n    vars : {\r\n      flipState : 0,\r\n      isClicked : false,\r\n      gra : null,\r\n      isUnflipPended : false,\r\n    },\r\n    init : ()=>{\r\n      mycanvas.vars.gra = mycanvas.context.createLinearGradient(-mycanvas.consts.size/2, 0, mycanvas.consts.size/2, 0);\r\n      mycanvas.vars.gra.addColorStop(0, '#57D0CB');\r\n      mycanvas.vars.gra.addColorStop(1, '#66F6F0');\r\n      mycanvas.vars.flipState = mycanvas.consts.flipState.done;\r\n    },\r\n    simulate : (timestamp)=>{\r\n      let simulRes = mycanvas.simulResult;\r\n      let totalFlipTime = mycanvas.consts.totalFlipTime;      \r\n      if(!simulRes){ //처음이면\r\n        simulRes = { //초기화\r\n          v : mycanvas.consts.initialV,\r\n          pos : curPos.slice(),\r\n          poligon : mycanvas.consts.unflipedSquare,\r\n          gra : mycanvas.vars.gra,\r\n        };\r\n        mycanvas.simulResult = simulRes;\r\n      }else{ //타임스탬프로 위치 각도 플립정도 계산\r\n        simulRes.v = mycanvas.consts.calCurV(curPos);\r\n        simulRes.pos = curPos.slice();\r\n      }\r\n      //플립상태 플립정도 를 이용 그라데이션과 폴리곤 정점계산  \r\n      if(mycanvas.vars.flipState !== mycanvas.consts.flipState.done){\r\n        if(!simulRes.time){//상태바뀌고 처음이면 \r\n          simulRes.time = timestamp-1;\r\n          simulRes.progress = 0;\r\n        }\r\n        simulRes.progress = Math.min(1000, simulRes.progress + (1000 / totalFlipTime) * (timestamp - simulRes.time));\r\n        simulRes.time = timestamp;\r\n        //정점계산\r\n        \r\n        let srcPoligon = mycanvas.consts.unflipedSquare;\r\n        let dstPoligon = mycanvas.consts.flipedSquare;\r\n        if(mycanvas.vars.flipState === mycanvas.consts.flipState.unfliping){\r\n          [srcPoligon, dstPoligon] = [dstPoligon, srcPoligon];\r\n        }        \r\n        simulRes.poligon = Vector2D.interpolation(srcPoligon,dstPoligon,simulRes.progress/1000);\r\n        //그라데이션 계산\r\n        //플립 #57D0CB -> #66F6F0 언플립#66F6F0 -> #57D0CB \r\n        let srcColor = [0x57,0xD0,0xCB];\r\n        let dstColor = [0x66,0xF6,0xF0];\r\n        if(mycanvas.vars.flipState === mycanvas.consts.flipState.unfliping){\r\n          [srcColor, dstColor] = [dstColor, srcColor];\r\n        }\r\n        let tgtcolor = Vector2D.interpolation(srcColor,dstColor,simulRes.progress/1000);\r\n        tgtcolor = tgtcolor.map(el=>Math.round(el).toString(16).toUpperCase().padStart(2, '0'));\r\n        mycanvas.vars.gra.addColorStop(0, \"#\" + tgtcolor.join(\"\"));\r\n        simulRes.gra = mycanvas.vars.gra;\r\n        if(simulRes.progress > 999){\r\n          simulRes.progress = undefined;\r\n          simulRes.time = undefined;\r\n          mycanvas.vars.flipState = mycanvas.consts.flipState.done;\r\n        }        \r\n      }\r\n      if(mycanvas.vars.isUnflipPended) mycanvas.consts.unflip();\r\n    },\r\n    render : ()=>{      \r\n        let simulRes = mycanvas.simulResult;\r\n        mycanvas.context.save(); \r\n        mycanvas.context.translate(simulRes.pos[0],simulRes.pos[1]);\r\n        mycanvas.context.rotate(simulRes.v.getRadian());\r\n        mycanvas.drawPolygon(simulRes.poligon);\r\n        mycanvas.fill(simulRes.gra);\r\n        mycanvas.context.restore();      \r\n    },\r\n  });\r\n\r\n  const mouseMove = (e)=>{\r\n    curPos[0] = e.clientX - canvasRef.current.offsetLeft;\r\n    curPos[1] = e.clientY - canvasRef.current.offsetTop;\r\n  }\r\n  const mouseEnter = (e)=>{\r\n    curPos[0] = e.clientX - canvasRef.current.offsetLeft;\r\n    curPos[1] = e.clientY - canvasRef.current.offsetTop;\r\n    mycanvas.canAnimRun = true;\r\n    mycanvas.canRender = true;\r\n  }\r\n  const mouseLeave = (e)=>{      \r\n    mycanvas.canAnimRun = false;\r\n    mycanvas.canRender = false;\r\n  }\r\n  const mouseDown = (e)=>{      \r\n    mycanvas.consts.doflip();\r\n  }\r\n  const mouseUp = (e)=>{\r\n    mycanvas.vars.isUnflipPended = true;    \r\n  }\r\n\r\n  useEffect(() => {\r\n    mycanvas.animStart(canvasRef.current);\r\n    return ()=>{\r\n      mycanvas.delete();\r\n    }\r\n  }, []);\r\n    \r\n  return (\r\n    <canvas \r\n      onMouseMove={mouseMove} \r\n      onMouseDown={mouseDown}\r\n      onMouseUp={mouseUp}\r\n      onMouseEnter={mouseEnter}\r\n      onMouseLeave={mouseLeave}\r\n      ref={canvasRef} width=\"1000\" height=\"800\">이 브라우저는 캔버스를 지원하지 않습니다.</canvas>\r\n  );\r\n}\r\n  \r\n\r\nexport default Paper;","import React from 'react';\r\nimport styles from './tictactoe.module.css';\r\n\r\nfunction Square(props) {\r\n    return (\r\n      <button className={styles.square} onClick={props.onClick}>\r\n        {props.value}\r\n      </button>\r\n    );\r\n  }\r\n  \r\n  class Board extends React.Component {\r\n    renderSquare(i) {\r\n      return (\r\n        <Square\r\n          value={this.props.squares[i]}\r\n          onClick={() => this.props.onClick(i)}\r\n        />\r\n      );\r\n    }\r\n  \r\n    render() {\r\n      return (\r\n        <div>\r\n          <div className={styles.boardrow}>\r\n            {this.renderSquare(0)}\r\n            {this.renderSquare(1)}\r\n            {this.renderSquare(2)}\r\n          </div>\r\n          <div className={styles.boardrow}>\r\n            {this.renderSquare(3)}\r\n            {this.renderSquare(4)}\r\n            {this.renderSquare(5)}\r\n          </div>\r\n          <div className={styles.boardrow}>\r\n            {this.renderSquare(6)}\r\n            {this.renderSquare(7)}\r\n            {this.renderSquare(8)}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n  class Game extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        history: [\r\n          {\r\n            squares: Array(9).fill(null)\r\n          }\r\n        ],\r\n        stepNumber: 0,\r\n        xIsNext: true\r\n      };\r\n    }\r\n  \r\n    handleClick(i) {\r\n      const history = this.state.history.slice(0, this.state.stepNumber + 1);\r\n      const current = history[history.length - 1];\r\n      const squares = current.squares.slice();\r\n      if (calculateWinner(squares) || squares[i]) {\r\n        return;\r\n      }\r\n      squares[i] = this.state.xIsNext ? \"X\" : \"O\";\r\n      this.setState({\r\n        history: history.concat([\r\n          {\r\n            squares: squares\r\n          }\r\n        ]),\r\n        stepNumber: history.length,\r\n        xIsNext: !this.state.xIsNext\r\n      });\r\n    }\r\n  \r\n    jumpTo(step) {\r\n      this.setState({\r\n        stepNumber: step,\r\n        xIsNext: (step % 2) === 0\r\n      });\r\n    }\r\n  \r\n    render() {\r\n      const history = this.state.history;\r\n      const current = history[this.state.stepNumber];\r\n      const winner = calculateWinner(current.squares);\r\n  \r\n      const moves = history.map((step, move) => {\r\n        const desc = move ?\r\n          'Go to move #' + move :\r\n          'Go to game start';\r\n        return (\r\n          <li key={move}>\r\n            <button onClick={() => this.jumpTo(move)}>{desc}</button>\r\n          </li>\r\n        );\r\n      });\r\n  \r\n      let status;\r\n      if (winner) {\r\n        status = \"Winner: \" + winner;\r\n      }else if(this.state.stepNumber === 9){\r\n        status = \"Draw\";\r\n      } else {\r\n        status = \"Next player: \" + (this.state.xIsNext ? \"X\" : \"O\");\r\n      }\r\n\r\n      return (\r\n        <div className={styles.game}>\r\n          <div className={styles.gameboard}>\r\n            <Board\r\n              squares={current.squares}\r\n              onClick={ i => this.handleClick(i)}\r\n            />\r\n          </div>\r\n          <div className={styles.gameinfo}>\r\n            <div>{status}</div>\r\n            <ol>{moves}</ol>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  function calculateWinner(squares) {\r\n    const lines = [\r\n      [0, 1, 2],\r\n      [3, 4, 5],\r\n      [6, 7, 8],\r\n      [0, 3, 6],\r\n      [1, 4, 7],\r\n      [2, 5, 8],\r\n      [0, 4, 8],\r\n      [2, 4, 6]\r\n    ];\r\n    for (let i = 0; i < lines.length; i++) {\r\n      const [a, b, c] = lines[i];\r\n      if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\r\n        return squares[a];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\nexport default Game;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport styles from './Home.module.css';\r\n\r\nclass Card extends React.Component{\r\n    render(){\r\n      return (  \r\n        <div className={styles.card}>\r\n        </div>\r\n      );\r\n    }\r\n}\r\n\r\nclass Home extends React.Component{\r\n  \r\n    render(){\r\n      let onClickHandler = ()=>{\r\n        fetch(\"http://localhost:4000/images\", {\r\n          method: 'POST',\r\n        }).then(res => res.json())\r\n        .then(json => console.log(json));\r\n       }\r\n      return (  \r\n            <div onClick={onClickHandler} className={styles.container} >\r\n                <Card />\r\n            </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  export default Home;","import React, { useEffect,useRef } from 'react';\r\nimport { MyCanvas } from './lib/MyCanvas';\r\nimport CalLiWorker from \"./calLiWorker\";\r\nimport GreyScaleMaker from \"./greyScaleMaker\";\r\nimport images from './lib/Images';\r\nimport styles from './Mosaic.module.css';\r\n\r\nconst MosaicSize = 50;\r\nconst NumOfPixel = 30;\r\nconst canvasSize = 500;\r\nclass MosaicInfo{\r\n    constructor(){   \r\n        this.bannedList = new Set();\r\n        this.imageIdx = 0;\r\n    }\r\n};\r\nfunction Mosaic(props) { \r\n    let canvasRef = useRef(null);\r\n    let originCanvasRef = useRef(null);\r\n    let tmpCanvasRef = useRef(null);\r\n    let bgImgRef = useRef(null);\r\n    let bgImg = {};\r\n    \r\n    let myc = new MyCanvas({\r\n        consts :{\r\n            setPos : (dx,dy)=>{\r\n                myc.vars.pos[0] += dx;\r\n                myc.vars.pos[1] += dy;\r\n                myc.vars.pos[2] += dx;\r\n                myc.vars.pos[3] += dy; \r\n            },\r\n            zoom : (posX,posY,d)=>{\r\n                let ratioX = posX/canvasSize;\r\n                let ratioY = posY/canvasSize;\r\n\r\n                let prevSize = myc.vars.originSize / myc.vars.zoomScale;  \r\n                myc.vars.zoomScale = Math.min(myc.vars.maxZoomScale,Math.max(1,myc.vars.zoomScale+d));      \r\n                let viewportSize = myc.vars.originSize / myc.vars.zoomScale;  \r\n\r\n                let preva = prevSize * ratioX;\r\n                let prevb = prevSize * ratioY; \r\n                let cura = viewportSize * ratioX;   \r\n                let curb = viewportSize * ratioY;\r\n                let dx,dy;\r\n                [dx,dy] = myc.consts.getClampVal(cura - preva,curb - prevb);\r\n\r\n                myc.consts.setPos(dx,dy); \r\n            },\r\n\r\n            move : (dx,dy)=>{\r\n                if(!myc.vars.isInit || !myc.vars.canMove) return;\r\n                dx = dx*10/myc.vars.zoomScale;\r\n                dy = dy*10/myc.vars.zoomScale;\r\n                [dx,dy] = myc.consts.getClampVal(dx,dy);\r\n\r\n                myc.consts.setPos(dx,dy);\r\n            },\r\n            getClampVal:(x,y)=>{\r\n                let viewportSize = myc.vars.originSize / myc.vars.zoomScale;\r\n                //원본크기가 뷰포트사이즈보다 같거나 작을때\r\n                if(viewportSize >= myc.vars.originSize*myc.vars.ratioW){\r\n                    x = Math.max(-myc.vars.pos[0],x);//최소를 정함\r\n                    x = Math.min(viewportSize - myc.vars.pos[2],x);//최대를 정함\r\n                }else{\r\n                    x = Math.max(viewportSize - myc.vars.pos[2],x);//최소를 정함\r\n                    x = Math.min(-myc.vars.pos[0],x);//최대를 정함\r\n                }\r\n                if(viewportSize >= myc.vars.originSize*myc.vars.ratioH){\r\n                    y = Math.max(-myc.vars.pos[1],y);\r\n                    y = Math.min(viewportSize - myc.vars.pos[3],y);\r\n                }else{\r\n                    y = Math.max(viewportSize - myc.vars.pos[3],y);\r\n                    y = Math.min(-myc.vars.pos[1],y);\r\n                } \r\n                return [x,y];\r\n            }\r\n        },\r\n        vars : {\r\n            zoomScale : 1,\r\n            pos : [0,0,0,0],\r\n            isInit : false,\r\n            maxZoomScale : 1,\r\n            originSize : 1000,\r\n            canMove :false,\r\n            ratioW : 1,\r\n            ratioH : 1,\r\n            radioOfPic : 1,\r\n        },\r\n        init : ()=>{   \r\n            myc.vars.originSize = originCanvas.canvas.width > originCanvas.canvas.height ? originCanvas.canvas.width : originCanvas.canvas.height;\r\n            myc.vars.ratioW = originCanvas.canvas.width / myc.vars.originSize;\r\n            myc.vars.ratioH = originCanvas.canvas.height / myc.vars.originSize;\r\n            myc.vars.pos[0] = myc.vars.originSize* (1-myc.vars.ratioW)/2;\r\n            myc.vars.pos[1] = myc.vars.originSize* (1-myc.vars.ratioH)/2;\r\n            myc.vars.pos[2] = myc.vars.pos[0] + myc.vars.originSize*myc.vars.ratioW;\r\n            myc.vars.pos[3] = myc.vars.pos[1] + myc.vars.originSize*myc.vars.ratioH;\r\n            myc.vars.maxZoomScale = myc.vars.originSize/canvasSize;\r\n            myc.vars.radioOfPic = bgImg.renderedPixel/myc.vars.originSize;          \r\n            myc.vars.isInit = true;\r\n        },\r\n        simulate : ()=>{\r\n            let k = myc.vars.originSize / myc.vars.zoomScale;\r\n            let picPos = [-bgImg.zeroX+myc.vars.pos[0]*myc.vars.radioOfPic, -bgImg.zeroY+myc.vars.pos[1]*myc.vars.radioOfPic];\r\n            let viewportSizeForPic = bgImg.renderedPixel /myc.vars.zoomScale;\r\n\r\n            myc.simulResult = {\r\n                viewportSize : k,                \r\n                pos : myc.vars.pos,\r\n                picPos : picPos,\r\n                viewportSizeForPic : viewportSizeForPic,\r\n            };\r\n        },\r\n        render : ()=>{\r\n            //그리기\r\n            let res = myc.simulResult;\r\n            myc.context.drawImage(originCanvas.canvas,\r\n                -res.pos[0], -res.pos[1], myc.simulResult.viewportSize, myc.simulResult.viewportSize,\r\n                0, 0, canvasSize, canvasSize);\r\n\r\n            myc.context.globalAlpha = 0.1;\r\n            myc.context.drawImage(bgImgRef.current,\r\n                -res.picPos[0], -res.picPos[1], myc.simulResult.viewportSizeForPic, myc.simulResult.viewportSizeForPic,\r\n                0,0,canvasSize,canvasSize);\r\n\r\n            myc.context.globalAlpha = 1;\r\n            \r\n        },\r\n    });\r\n    \r\n    let originCanvas = new MyCanvas({\r\n        consts :{\r\n            renderLightness : (lightness)=>{\r\n                for(let pos of originCanvas.vars.pos_lightness[lightness]) {\r\n                    let mosaicInfo = originCanvas.vars.mosaicInfo;\r\n                    let cur = mosaicInfo[pos[1]][pos[0]];\r\n                    let imgs = originCanvas.vars.imgs_lightness;\r\n                    let curImage; \r\n                    //이미지를 채울 때 주변에 이미 있는 사진은 제외함   \r\n                    let candis = new Array();                 \r\n                    for(let i in imgs[lightness]){\r\n                        let imgidx = imgs[lightness][i].imgidx;\r\n                        if(!cur.bannedList.has(imgidx)){\r\n                            candis.push([i,imgidx]);\r\n                        }\r\n                    }\r\n                    let rd = Math.floor(Math.random() * candis.length);\r\n                    cur.imgidx = candis[rd][1];\r\n                    curImage = imgs[lightness][candis[rd][0]];\r\n                    //채울때 주변에 이 사진은 쓰지 말라고 표시함\r\n                    for(let i = -1; i <= 1; i++){\r\n                        for(let j = -1; j <= 1; j++){\r\n                            let x = pos[0]+i, y = pos[1]+j;\r\n                            if(mosaicInfo[y] && mosaicInfo[y][x]){\r\n                                mosaicInfo[y][x].bannedList.add(cur.imageIdx);\r\n                            }                            \r\n                        }                        \r\n                    }\r\n                    originCanvas.context.putImageData(curImage,pos[0]*MosaicSize,pos[1]*MosaicSize);  \r\n                }\r\n                originCanvas.vars.imgs_lightness[lightness] = null;\r\n                originCanvas.vars.pos_lightness[lightness] = null;\r\n            },\r\n            nOfSameLightnessImgs : 9,\r\n        },\r\n        vars : {\r\n            pos_lightness : new Array(256).fill(null).map(()=>new Array()),\r\n            imgs_lightness : new Array(256).fill(null).map(()=>new Array()),\r\n            imgInfo : [],\r\n            isFull : new Array(256).fill(false),\r\n            base : 0,\r\n            numOfColPixel : 0,\r\n            numOfRowPixel : 0,\r\n            mosaicInfo : null,\r\n            renderLightnessCnt : 0,\r\n        },\r\n        init : ()=>{            \r\n            //w, h 중 큰 것을 NumOfPixel개 로 나눠서 base를 구하고 base x base 크기의 정사각형으로 모자이크를 구성한다. \r\n            originCanvas.context.strokeStyle = 'rgba(0, 0, 0, 0)';\r\n            let w = bgImgRef.current.width;\r\n            let h = bgImgRef.current.height;\r\n            let base,numOfRowPixel,numOfColPixel;\r\n            if(w >= h){\r\n                base = w/NumOfPixel;\r\n                numOfRowPixel = parseInt(h/base);\r\n                h = numOfRowPixel * base;       \r\n                numOfColPixel = NumOfPixel;\r\n            }else{\r\n                base = h/NumOfPixel;\r\n                numOfColPixel = parseInt(w/base);\r\n                w = numOfColPixel * base;       \r\n                numOfRowPixel = NumOfPixel;\r\n            }\r\n\r\n            originCanvas.vars.mosaicInfo = new Array(numOfRowPixel);\r\n            for (var i = 0; i < numOfRowPixel; i++) {\r\n                originCanvas.vars.mosaicInfo[i] = new Array(numOfColPixel).fill(null).map(()=> new MosaicInfo());\r\n            }\r\n            //배경 이미지 로드 및 관련 정보 초기화\r\n            bgImg.renderedW = w;\r\n            bgImg.renderedH = h;\r\n            bgImg.zeroX = (bgImgRef.current.width - bgImg.renderedW)/2;\r\n            bgImg.zeroY = (bgImgRef.current.height - bgImg.renderedH)/2;\r\n            bgImg.renderedPixel = w > h ? w : h;\r\n            //drawImage를 활용 해상도를 기준 크기까지 줄임\r\n            tmpCanvasRef.current.width  = numOfColPixel;\r\n            tmpCanvasRef.current.height = numOfRowPixel;\r\n            let tmpctx = tmpCanvasRef.current.getContext('2d');\r\n            tmpctx.drawImage(bgImgRef.current,bgImg.zeroX,bgImg.zeroY,bgImg.renderedW,bgImg.renderedH,\r\n                                                    0,0,numOfColPixel,numOfRowPixel);\r\n\r\n            originCanvas.vars.base = base;\r\n            originCanvas.vars.numOfColPixel = numOfColPixel;\r\n            originCanvas.vars.numOfRowPixel = numOfRowPixel;\r\n            originCanvas.canvas.width = numOfColPixel*MosaicSize;\r\n            originCanvas.canvas.height = numOfRowPixel*MosaicSize;             \r\n        },\r\n        render : ()=>{                    \r\n            let vars = originCanvas.vars;\r\n            //돌면서 색상 채우고, 색상정보를 저장함\r\n            let tmpctx = tmpCanvasRef.current.getContext('2d');\r\n            let imageData = tmpctx.getImageData(0,0,vars.numOfColPixel,vars.numOfRowPixel).data;\r\n            for(let i = 0; i < vars.numOfRowPixel ; i++){\r\n                for(let j = 0; j < vars.numOfColPixel ; j++){\r\n                    let y = i*MosaicSize;\r\n                    let x = j*MosaicSize;\r\n                    let curPixel = 4*(i*vars.numOfColPixel + j);\r\n                    let lightness = parseInt((3*imageData[curPixel] + 4*imageData[curPixel+1] +imageData[curPixel+2]) >>> 3);\r\n                    originCanvas.context.fillStyle = 'rgb('+ lightness + \",\"+ lightness +',' +lightness+')';\r\n                    originCanvas.context.fillRect(x,y,MosaicSize,MosaicSize);\r\n                    vars.pos_lightness[lightness].push([j,i]);\r\n                }                \r\n            }\r\n            //모자이크처리 이미지를 myc에 그리기 시작\r\n            myc.canAnimRun = true;\r\n            myc.canRender = true;\r\n            return;\r\n            //사진을 하나씩 하나씩 불러오면서 비슷한 밝기에다 추가함\r\n            let imageNum = images.length;            \r\n            tmpCanvasRef.current.width  = MosaicSize * 2 * imageNum;\r\n            tmpCanvasRef.current.height = MosaicSize * 2 + 2;\r\n            \r\n            originCanvas.vars.imgInfo = new Array(images.length);\r\n            let imgInfo = originCanvas.vars.imgInfo;\r\n\r\n            const onloadhandler = (e)=>{ \r\n                       \r\n                tmpctx.drawImage(e.target, 0,0,MosaicSize*2,MosaicSize*2, e.target.idx*MosaicSize*2,0,MosaicSize*2,MosaicSize*2);\r\n                let imgDatas = [];\r\n                for(let i = 0; i < 4; i++){\r\n                    let x = e.target.idx*MosaicSize*2 + (i%2 * MosaicSize);\r\n                    let y = Math.floor(i/2) * MosaicSize;\r\n                    imgDatas.push(tmpctx.getImageData(x,y,MosaicSize,MosaicSize));\r\n                    imgDatas[i].imgidx = e.target.idx;\r\n                }\r\n\r\n                if (!window.Worker) {\r\n                    tmpctx.drawImage(e.target, 0,0,MosaicSize*2,MosaicSize*2, e.target.idx*MosaicSize*2,0,MosaicSize*2,MosaicSize*2);\r\n                    for(let i = 0; i < 4; i++){\r\n                        let imageData = MyCanvas.img2greyScale(imgDatas[i]);\r\n                        let lightness = 0;\r\n                        let cnt = imageData.data.length/4;\r\n                        for(let i = 0 ; i < imageData.data.length; i+=4){\r\n                            lightness += imageData.data[i];\r\n                        }\r\n                        lightness = parseInt(lightness / cnt);\r\n                        \r\n                        for(let d = -20; d <= 10 ;d++){\r\n                            if(lightness + d >= 10 && lightness + d <= 235 && !originCanvas.vars.isFull[lightness + d]){\r\n                                if(d < 0){\r\n                                    let res = MyCanvas.lightnessMul(imageData, (lightness + d) / lightness);\r\n                                    res.imgidx = imageData.imgidx;\r\n                                    originCanvas.vars.imgs_lightness[lightness + d].push(res);\r\n                                }else if (d > 0){\r\n                                    let res = MyCanvas.lightnessAdd(imageData, d);\r\n                                    res.imgidx = imageData.imgidx;\r\n                                    originCanvas.vars.imgs_lightness[lightness + d].push(res);\r\n                                }else{\r\n                                    originCanvas.vars.imgs_lightness[lightness + d].push(imageData);\r\n                                }\r\n\r\n                                let curSize = originCanvas.vars.imgs_lightness[lightness + d].length;\r\n                                if(curSize >= originCanvas.consts.nOfSameLightnessImgs){                                \r\n                                    originCanvas.vars.isFull[lightness + d] = true;\r\n                                    originCanvas.consts.renderLightness(lightness + d);\r\n                                }\r\n                            }                       \r\n                        } \r\n                    }                    \r\n                }else{\r\n                    const calLiWorker = new Worker(CalLiWorker);\r\n                    const greyScaleMaker = new Worker(GreyScaleMaker);  \r\n                    calLiWorker.onmessage = function(e) {//e에는      \r\n                        let lightness = e.data[0];\r\n                        let isComplete = true;\r\n                        for(let d = -20; d <= 10 ;d++){\r\n                            if(lightness + d >= 10 && lightness + d <= 235) {\r\n                                originCanvas.vars.isFull[lightness+d]++;\r\n                                if(originCanvas.vars.isFull[lightness+d] <= originCanvas.consts.nOfSameLightnessImgs){\r\n                                    isComplete = false;\r\n                                }\r\n                            }\r\n                        }\r\n                        if(!isComplete){\r\n                            greyScaleMaker.postMessage({\r\n                                isFull : originCanvas.vars.isFull,\r\n                                lightness : lightness,\r\n                                nOfSameLightnessImgs : originCanvas.consts.nOfSameLightnessImgs,\r\n                                imgData : e.data[1]\r\n                            });\r\n                        }                        \r\n                    }\r\n                    greyScaleMaker.onmessage = function(e) {//e에는                        \r\n                        for(let i = 0; i< e.data.length;i++){\r\n                            let lightness = e.data[i][0];\r\n                            originCanvas.vars.imgs_lightness[lightness].push(e.data[i][1]);\r\n                            let curSize = originCanvas.vars.imgs_lightness[lightness].length;\r\n                            if(curSize >= originCanvas.consts.nOfSameLightnessImgs){\r\n                                originCanvas.consts.renderLightness(lightness);\r\n                            }\r\n                        }                       \r\n                    }\r\n                    for(let i = 0; i < 4; i++){\r\n                        calLiWorker.postMessage(imgDatas[i]);\r\n                    }                     \r\n                }\r\n                imgInfo[e.target.idx].tmpimg.onload = null;\r\n                imgInfo[e.target.idx].tmpimg = null;\r\n            };\r\n            \r\n            for(let idx = 0; idx < images.length;idx++){                \r\n                let tmpimg = new Image();\r\n                tmpimg.crossOrigin = \"Anonymous\";\r\n                tmpimg.idx = idx;                \r\n                tmpimg.addEventListener(\"load\", onloadhandler,{once : true});\r\n                tmpimg.src = images[idx];\r\n                imgInfo[idx] = {\r\n                    tmpimg : tmpimg,\r\n                    src : images[idx],\r\n                    //!!다른 정보들\r\n                };\r\n            }\r\n            //정보 보여주는 팝업창을 띄우기\r\n            //서버 구축\r\n            //api연결\r\n            //일반용 테스트용 캐시구현\r\n        },\r\n    });\r\n    \r\n    useEffect(() => {\r\n           \r\n        return ()=>{\r\n            originCanvas.delete();\r\n            myc.delete();\r\n        }\r\n    }, []);\r\n\r\n    const onWheelhandler = (e)=>{\r\n        let x = e.pageX - canvasRef.current.offsetLeft;\r\n        let y = e.pageY - canvasRef.current.offsetTop;\r\n        if(e.deltaY > 0){\r\n            myc.consts.zoom(x,y,-0.1);\r\n        }else if(e.deltaY < 0){\r\n            myc.consts.zoom(x,y,0.1);\r\n        }\r\n    }\r\n\r\n    const mouseMove = (e)=>{\r\n        myc.consts.move(e.movementX, e.movementY);  \r\n    }\r\n    const onClickhandler = (e)=>{\r\n\r\n    }\r\n    const mouseDown = (e)=>{      \r\n        myc.vars.canMove = true;\r\n    }\r\n    const mouseUp = (e)=>{\r\n        myc.vars.canMove = false;\r\n    }\r\n    const mouseLeave = (e)=>{      \r\n        myc.vars.canMove = false;\r\n    }\r\n    const onImageLoaded = (e)=>{          \r\n        myc.canRender = false;\r\n        myc.canAnimRun = false;\r\n        originCanvas.renderPicture(originCanvasRef.current);\r\n        myc.animStart(canvasRef.current);\r\n    }\r\n    return (\r\n        <>\r\n        <img className={styles.dispNone} src={props.src} ref={bgImgRef}\r\n            onLoad={onImageLoaded}            \r\n        ></img>\r\n        <canvas ref={canvasRef} width={canvasSize} height={canvasSize}\r\n            className={'asdf'}\r\n            onClick={onClickhandler}\r\n            onWheel={onWheelhandler}\r\n            onMouseMove={mouseMove} \r\n            onMouseDown={mouseDown}\r\n            onMouseUp={mouseUp}\r\n            onMouseLeave={mouseLeave}\r\n        >\r\n            이 브라우저는 캔버스를 지원하지 않습니다.\r\n        </canvas> \r\n        <canvas className={styles.dispNone} ref={tmpCanvasRef} width=\"100\" height=\"100\">\r\n        </canvas> \r\n        <canvas className={styles.dispNone} ref={originCanvasRef} width=\"100\" height=\"100\">\r\n        </canvas>        \r\n        </>  \r\n        \r\n    );\r\n}\r\n\r\nexport default Mosaic;","import React, { Fragment } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router ,Route, NavLink,Switch } from \"react-router-dom\";\r\nimport styles from './index.module.css';\r\nimport Paper from './PaperDribble';\r\nimport Game from './tictactoe'\r\nimport Home from './Home'\r\nimport Mosaic from './Mosaic'\r\n\r\n\r\nclass Main extends React.Component{\r\n  render(){\r\n    return (  \r\n      <div className={styles.container}>\r\n        <h1>\r\n          <NavLink to={`/99-interactions/home` } activeClassName={styles.linkActive}>Home</NavLink>     \r\n          <NavLink to={`/99-interactions/Tags` } activeClassName={styles.linkActive}>Tags</NavLink>     \r\n          <NavLink to={`/99-interactions/paperDribble` } activeClassName={styles.linkActive}>About</NavLink>     \r\n          <NavLink to={`/99-interactions/contact` } activeClassName={styles.linkActive}>Contact</NavLink>  \r\n          <NavLink to={`/99-interactions/test` } activeClassName={styles.linkActive}>test</NavLink>   \r\n          <span>user</span>\r\n        </h1>\r\n        <Switch>\r\n          <Route path={`/99-interactions/home`}>\r\n              <Home/>\r\n          </Route>\r\n          <Route path={`/99-interactions/about`}>\r\n            <Game/>\r\n          </Route>\r\n          <Route path={`/99-interactions/paperDribble`}>\r\n            <Paper coeff_friction={0.6} size={50}/>\r\n          </Route>\r\n          <Route path={`/99-interactions/test`}>\r\n            <Mosaic src={`/99-interactions/images/dessert.jpg`}/>\r\n          </Route>\r\n        </Switch>        \r\n        <div>\r\n          this will be footer\r\n        </div>  \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass App extends React.Component {\r\n  render(){\r\n    return (  \r\n      <Router>              \r\n        <Switch>\r\n          <Route path='/99-interactions' component={Main} />\r\n          <Route path='*'>\r\n            없음\r\n          </Route> \r\n        </Switch>      \r\n      </Router>  \r\n    );\r\n  } \r\n} \r\n\r\nReactDOM.render(<App/>, document.getElementById('root'));\r\n"],"sourceRoot":""}